# Add custom utilities directory to the path
export PATH="$PATH:~/bin"

# Add brew sbin folder to the path
export PATH="$PATH:/usr/local/sbin"

# Bash completion
if [ -n "$(command -v brew)" ]
then
    if [ -f $(brew --prefix)/etc/bash_completion ]; then
        . $(brew --prefix)/etc/bash_completion
    fi
fi

if [ -f /Applications/Xcode.app/Contents/Developer/usr/share/git-core/git-completion.bash ]; then
	. /Applications/Xcode.app/Contents/Developer/usr/share/git-core/git-completion.bash
fi

# Functions
function g {
    if [[ -f "gradlew" ]]
    then
        eval "./gradlew $@"
    else
        echo "No gradlew wrapper around..."
    fi
}

# Aliases
alias la='ls -a'
alias ll='ls -lha'
alias l='ls -lh'
alias ch='git rev-parse HEAD'

# Terminal colors
export CLICOLOR=1
export LSCOLORS="GxFxCxDxBxegedabagaced"
alias grep='grep --color=auto'

GREEN="\033[32m"
YELLOW="\033[33;1m"
LIGHT_MAGENTA="\033[95m"
GRAY="\033[90m"
CLEAR="\033[0m"

ITALIC="\033[3m"

# Prompt customization

function git_prompt {
  if [[ -d '.git' ]]
  then
    echo -en "${LIGHT_MAGENTA}(git: "
    if [[ -z "$(git status -s)" ]]
    then
      echo -en "$(git branch | grep '*' | sed 's/\* //g')"
    else
      echo -en "${ITALIC}$(git branch | grep '*' | sed 's/\* //g')${GREEN}*${CLEAR}"
    fi
    echo -en "${LIGHT_MAGENTA}) "
  fi
}

function terminal_date {
  echo -n "($(date +"%b %e %T"))"
}

export PS1="${GREEN}\u@\h: ${YELLOW}\w \$(git_prompt)${GRAY}\$(terminal_date)${CLEAR}\n\$ "
